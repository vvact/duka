{% extends "base.html" %}
{% block content %}
<div class="container mt-5 text-center">
  <div class="spinner-border text-success mb-4" style="width: 4rem; height: 4rem;" role="status">
    <span class="visually-hidden">Processing...</span>
  </div>

  <h4 class="mb-3">STK Push Sent to {{ order.phone }}</h4>
  <p class="lead">We're waiting for M-Pesa confirmation for:</p>

  <ul class="list-group list-group-flush mb-3">
    <li class="list-group-item"><strong>Order ID:</strong> #{{ order.id }}</li>
    <li class="list-group-item"><strong>Amount:</strong> KSh {{ order.get_total }}</li>
    <li class="list-group-item"><strong>Payment Method:</strong> M-Pesa STK Push</li>
  </ul>

  <p class="text-muted">Please enter your M-Pesa PIN on your phone to complete the transaction.</p>
</div>

<!-- Simulate confirmation after 3 seconds -->
<script>
  setTimeout(function() {
    window.location.href = "{% url 'checkout_success' order.id %}";
  }, 30000);
</script>
{% endblock %}
